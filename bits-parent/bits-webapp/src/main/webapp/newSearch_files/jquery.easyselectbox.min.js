(function(a){var b;a.fn.extend({easySelectBox:function(c){var d={className:"easy-select-box",speed:0};c=a.extend(d,c);return this.each(function(){var l=c;var k=a(this);var e="";if(typeof(a(this).attr("class"))!="undefined"){e=a(this).attr("class")}if("select"!=k[0].nodeName.toLowerCase()){return false}var m=k.children("option");var j=null;var o=k.val();var p="disp";var n="";var q="";var h=0;var f="";var g="";var i=true;a.each(m,function(s,t){if(typeof(a(t).attr("class"))!="undefined"){q=a(t).attr("class")}else{q=""}f+='<li><a href="javascript:void(0);" rel="'+a(t).val()+'" class="'+q+'">'+a(t).text()+"</a></li>";if(i){g=a(t).val();i=false}if(a(t).attr("selected")=="selected"){g=a(t).val()}if(o==a(t).val()){h=s;n=q}});var r=k.parent(".sel").width();f='<div style="width:'+r+'px" class="'+l.className+" "+e+'"><a style="width:'+(r-5)+'px" class="'+p+" "+n+'" href="javascript:void(0);">'+m.eq(h).text()+"</a><div style='width:"+r+"px' class='sel-box'><ul>"+f+"</ul></div></div>";j=a(f).insertAfter(k);k.attr("value",g);k.hide();j.data("o",l);b=a(document).data("easySelect");if(b==null){b=new Array()}b.push(j);a(document).data("easySelect",b);j.click(function(s){if(a(this).hasClass("notclick")==true){return false}else{if(j.children("div").is(":visible")){j.css("z-index",99);j.children("div").slideUp(l.speed)}else{b=a(document).data("easySelect");if(b!=null){a.each(b,function(){var t=a(this).data("o");a(this).css("z-index",99);a(this).children("div").slideUp(t.speed)})}j.css("z-index",100);a(j).children("div").slideDown(l.speed)}s.stopPropagation();return false}});a(document).click(function(){b=a(document).data("easySelect");if(b!=null){a.each(b,function(){if(a(this).children("div").is(":visible")){var s=a(this).data("o");a(this).children("div").slideUp(s.speed)}})}});a(k).next().on("click","div ul li",function(){var s=k.find("option:selected").index();var t=true;if(s==a(this).index()){t=false}j.children("."+p).html(a(this).children("a").html());j.children("."+p).attr("class",""+p+" "+a(this).children("a").attr("class")+"");k.children("option").removeAttr("selected");k.find("option").eq(a(this).index()).attr("selected","selected");k.trigger("select",[a(this).index()]);k.attr("value",a(this).children("a").attr("rel"));if(t){k.change()}})})}})})(jQuery);